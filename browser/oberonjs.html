<!DOCTYPE html>
<html>
<body>
<p>
Oberon module:
</p>
<textarea id="source" rows="10" cols="80">
MODULE test;
IMPORT JS;
BEGIN
    JS.alert("Hello, World!")
END test.
</textarea>
<p>
<button onclick="compile()">Compile</button>
<button onclick="compile(); run()">Compile &amp; Run</button>
</p>

<p id="compileErrors" style="color:red"></p>

<textarea id="result" rows="10" cols="80">
</textarea>
<p>
<button onclick="run()">Run</button>
</p>
<p id="runErrors" style="color:red"></p>

<script>
function require(){}
</script>

<script src="oc.js"></script>

<script>
function compile(){
	var src = document.getElementById("source").value;
	var result;
	var errors = "";
	try {
		result = require("oc.js").compile(src, function(e){
			errors += e;
		});
		}
	catch (e) {
		errors += e;
		}

	if (!result)
		result = "";
	document.getElementById("result").value = result;
	document.getElementById("compileErrors").textContent = errors;
}

function run(){
	var errElement = document.getElementById("runErrors");
	errElement.textContent = "";
	try{
		eval(document.getElementById("result").value);
	}
	catch (e){
		var errors = "" + e;
		errElement.textContent = errors;
	}
}
</script>

</body>
</html>