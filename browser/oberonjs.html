<!DOCTYPE html>
<html>
<body>
<p>
Oberon module:
</p>
<textarea id="source" rows="10" cols="80">
MODULE test;
IMPORT JS;
BEGIN
    JS.alert("Hello, World!")
END test.
</textarea>
<p>
<button onclick="compile()">Compile</button>
<button onclick="compile(); run()">Compile &amp; Run</button>
</p>

<p id="compileErrors" style="color:red"></p>
<p id="compileTime"></p>

<textarea id="result" rows="10" cols="80">
</textarea>
<p>
<button onclick="run()">Run</button>
</p>
<p id="runErrors" style="color:red"></p>
<p id="runTime"></p>
<a href="http://oberspace.dyndns.org">Home</a>

<script>
function require(){}
</script>

<script src="oc.js"></script>

<script>
function compile(){
	var src = document.getElementById("source").value;
	var result;
	var errors = "";
	var start = new Date();
	try {
		result = require("oc.js").compile(src, function(e){
			errors += e;
		});
		}
	catch (e) {
		errors += e;
		}
	var compileTime = (new Date() - start) / 1000;

	if (!result)
		result = "";
	document.getElementById("result").value = result;
	document.getElementById("compileErrors").textContent = errors;
	document.getElementById("compileTime").textContent = "compile time (seconds): " + compileTime;
}

function run(){
	var errElement = document.getElementById("runErrors");
	errElement.textContent = "";
	var start = new Date();
	try{
		eval(document.getElementById("result").value);
	}
	catch (e){
		var errors = "" + e;
		errElement.textContent = errors;
	}
	var runTime = (new Date() - start) / 1000;
	document.getElementById("runTime").textContent = "rune time (seconds): " + runTime;
}
</script>

</body>
</html>